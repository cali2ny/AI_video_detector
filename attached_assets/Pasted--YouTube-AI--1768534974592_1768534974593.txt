추가로, YouTube 댓글을 활용한 **커뮤니티 의견(시청자 반응) 분석 기능**도 포함해 주세요.  
알고리즘의 판단뿐 아니라 “시청자들이 이 영상을 AI라고 보는지, 그냥 실제 영상으로 보는지”를 함께 보여주고 싶습니다.

[백엔드 · 타입 정의 확장]

`AnalyzeVideoResponse` 타입을 다음과 같이 확장해 주세요.

- `community?: {`
  `totalComments: number;`                  // 분석에 사용된 댓글 수 (실제 조회 수가 아니라, 우리가 처리한 개수)
  `aiVotes: number;`                        // "AI 같다" 쪽으로 분류된 댓글 수
  `realVotes: number;`                      // "실사 같다/진짜 영상" 쪽으로 분류된 댓글 수
  `neutralVotes: number;`                   // 구분 어려움 또는 관련 없는 댓글
  `topAiComments: { author: string; text: string; likeCount: number; }[];`
  `topRealComments: { author: string; text: string; likeCount: number; }[];`
  `}`

`community` 필드는 YouTube Data API를 사용할 수 있을 때만 채우고, 그렇지 않으면 `undefined`로 두어도 됩니다.

[백엔드 · YouTube 댓글 수집 및 분류 로직]

1) `videoId`가 있고 환경 변수 `YT_API_KEY`가 존재한다면, YouTube Data API v3의 `commentThreads` 엔드포인트를 사용해 상위 인기 댓글(예: 최대 50개 정도)을 가져옵니다. 가져올 때는 `order=relevance` 또는 `order=likeCount` 기준으로 상위 댓글을 받으면 됩니다. API 호출에 실패하거나 키가 없을 경우, `community`는 전체적으로 `undefined` 또는 `totalComments = 0` 처리하고, 서비스는 오류 없이 동작하게 해 주세요.

2) 각 댓글의 텍스트는 소문자 변환 및 한글 정규화(공백/특수문자 정리) 후, 간단한 키워드/패턴 기반으로 `AI`, `REAL`, `NEUTRAL` 세 클래스로 분류합니다. 분류 기준은 다음과 같습니다.

- AI로 분류하는 경우(“AI 같다”로 보는 댓글):

  - 직접적인 AI 언급:
    - "ai", "인공지능", "딥페이크", "deepfake", "fake", "합성 같", "generated", "ai video", "ai로 만든", "ai네" 등
  - “진짜처럼 보이는 AI”를 말하는 패턴:
    - "진짜 같네", "실사인 줄", "실사인줄", "사람이 찍은 줄", "사람이 찍은줄", "구분 안 되네", "구분안되네", "리얼하다", "진짜 같아서 무섭다", "실사급인데 ai", "ai인데 실사급" 등
    - 이런 표현들은 대부분 “AI인데 너무 리얼하다”는 의미로 쓰이기 때문에 `AI` 쪽으로 분류합니다.

- REAL(실사)로 분류하는 경우(“이건 진짜 촬영이다”라고 못 박는 댓글):

  - "실사", "실제 촬영", "진짜 촬영", "직접 찍은", "사람이 찍은거", "ai 아님", "이건 ai 아니네", "real footage", "this is real", "not ai", "shot on", "filmed with" 등

- 위 두 그룹에 해당하지 않는 댓글은 `NEUTRAL`로 둡니다.
  - 감탄("와", "멋지다"), 농담, 정치/잡담, 정보 요청("어디서 찍었나요?") 등은 Neutral 처리합니다.

3) 이렇게 분류된 댓글들을 집계해 `totalComments`, `aiVotes`, `realVotes`, `neutralVotes`를 채웁니다.  
   `totalComments`는 우리가 실제로 분석에 사용한 개수(AI/REAL/NEUTRAL 합)로 정의합니다.

4) `topAiComments`와 `topRealComments`는 각각 AI/REAL로 분류된 댓글 중 좋아요 수가 높은 순으로 상위 몇 개(예: 최대 3개)를 골라 채웁니다. 각 항목에는 `author`(표시 이름), `text`(댓글 내용), `likeCount`를 넣습니다. 댓글이 너무 길 경우에는 적절히 잘라서(예: 120자 정도) 끝에 "…"를 붙여 주세요.

[백엔드 · 커뮤니티 신호에 따른 점수 보정]

커뮤니티 신호는 메인 딥러닝/휴리스틱 점수를 완전히 뒤집지 않고, **약한 가중치로 보정하는 용도**로만 사용합니다. 다음 휴리스틱을 적용해 주세요.

- `totalComments`가 충분히 큰 경우(예: `totalComments ≥ 10`)에만 보정을 적용합니다. 그보다 적으면 신호가 약하다고 보고 점수 보정은 0으로 둡니다.

- AI 의심 댓글 비율이 높은 경우:
  - 조건: `totalComments ≥ 10` 이고 `aiVotes / totalComments ≥ 0.3`
  - 행동: 커뮤니티가 이 영상을 AI 쪽으로 보는 경향이 강하다고 보고, AI 점수를 약간 올리는 방향으로 `communityAdjustment`를 +10 정도로 두어 주세요.
  - 설명: `reasons` 배열에
    - "시청자 댓글 중 상당수가 이 영상을 AI 생성 영상으로 추정하고 있습니다."
    같은 문장을 추가합니다.

- AI 관련 언급이 거의 없는 경우:
  - 조건: `totalComments ≥ 10` 이고 `aiVotes == 0` 또는 `aiVotes / totalComments ≤ 0.05`
  - 행동: 댓글은 꽤 있지만 AI/합성 얘기가 거의 언급되지 않는다고 보고, "커뮤니티가 특별히 AI라고 의심하지 않는다"는 약한 REAL 쪽 신호로 해석합니다. 이때는 `communityAdjustment`를 -5 정도로 두어, AI 점수를 조금 낮추는 정도로만 보정합니다.
  - 설명: `reasons`에
    - "시청자 댓글에서 AI나 합성에 대한 언급이 거의 발견되지 않습니다."
    와 같은 문장을 추가합니다.

- `totalComments < 5` 인 경우:
  - 행동: `communityAdjustment = 0`으로 두고, 점수에 영향을 주지 않습니다.
  - 대신 `community` 정보에는 `totalComments` 그대로 채우되, 프론트엔드에서 "이 영상에 대해 'AI다/아니다'를 언급한 댓글이 거의 없습니다." 같은 안내를 보여줄 수 있게 해 주세요.

최종 점수 결합은 기존 휴리스틱 점수(`heuristicScore`)와 외부 딥러닝 점수(`externalApiScore`)를 먼저 결합한 `baseFinalScore`를 만든 뒤, 여기에 커뮤니티 보정을 더하는 방식으로 처리해 주세요.

- `baseFinalScore = heuristicScore * 0.3 + externalApiScore * 0.7` (외부 점수가 없으면 heuristicScore 사용)
- `finalScore = clamp(baseFinalScore + communityAdjustment, 0, 100)`

이렇게 하면 커뮤니티 신호는 독립된 세 번째 축이 아니라, **최종 점수에 ±10 정도만 영향을 주는 보조 신호**로 작동합니다.

[프론트엔드 · "시청자 의견" 카드 UI]

분석 결과 화면(/analysis)에는 “알고리즘 분석 결과”뿐 아니라, **시청자 의견 카드**도 함께 보여 주세요.

- 레이아웃:
  - 메인 카드(썸네일 + 게이지) 아래에 2열 카드 구조가 있다면,
    - 왼쪽: “분석 근거”
    - 가운데 또는 오른쪽: “시청자 의견”
    - 나머지 한 칸: “확인 팁”
  - 모바일에서는 세 카드가 위에서부터 “분석 근거 → 시청자 의견 → 확인 팁” 순서로 세로로 쌓이도록 구현합니다.

- 카드 상단:
  - 말풍선 또는 사람 아이콘 + "시청자 의견" 타이틀
  - 그 아래에 요약 문장 1줄:
    - 예: `시청자 42명 중 28명이 이 영상을 AI 생성 영상으로 추정합니다.`
    - 또는 `수집한 댓글 35개 중 AI 관련 언급은 거의 없습니다.`

- 비율 표시:
  - `aiVotes`, `realVotes`, `neutralVotes`, `totalComments`를 사용해 AI / REAL / NEUTRAL 비율을 계산한 뒤, 단일 막대 그래프 형태로 시각화해 주세요.
  - 예: 하나의 가로 바(div) 안을 세 구간으로 나누어,
    - 왼쪽: AI로 분류된 댓글 비율(레드/오렌지 계열)
    - 가운데: Neutral 비율(회색 계열)
    - 오른쪽: Real 비율(그린/민트 계열)
  - 바 아래에는 "AI로 본 댓글", "중립", "실사로 본 댓글" 텍스트와 각각의 비율(%)을 함께 표시합니다.

- 대표 댓글 리스트:
  - `topAiComments`에서 1~2개, `topRealComments`에서 1~2개를 골라, 작은 카드 형태로 보여 주세요.
  - 각 댓글 카드에는:
    - 상단 왼쪽에 "AI 의심" 또는 "실사로 봄" 같은 작고 둥근 배지
    - 그 옆에 작성자 이름
    - 우측에 "👍 12" 같은 좋아요 수
    - 아래에 1~2줄 댓글 텍스트 (너무 길면 말줄임표로 자르기)
  - 카드 전체는 hover 시 살짝 떠오르는 느낌(shadow-md → shadow-lg)과 배경색 약간 강조 효과를 줘서, 읽고 싶게 만드는 디자인으로 해 주세요.

- 데이터가 없을 때:
  - `community`가 undefined 이거나 `totalComments == 0` 이면,
    - 바/리스트 대신 중앙에
      - "이 영상에 대해 'AI다/아니다'를 언급한 댓글을 찾기 어려웠습니다."
      같은 문장만 보여 주세요.
  - 카드 자체는 그대로 렌더링해서 레이아웃이 깨지지 않도록 합니다.

이렇게 하면, 사용자는 알고리즘의 점수뿐 아니라 “사람들은 어떻게 보고 있는지”까지 한눈에 확인할 수 있고, 댓글이 거의 없는 진짜 영상의 경우에도 자연스러운 UI 흐름이 유지됩니다.
